##### Code to simulate sequences #####
## simulate sequences in partis
## partis is run through Docker (see partis instructions for how to install:
## https://github.com/psathyrella/partis/blob/master/docs/install.md)

## after install, run docker:
docker exec -it container_name bash 

##### Step 1: Simulate Sequences #####

## many parameter options: can pass a parameter-dir OR simulate-from-scratch
## some parameter examples:
# n-leaves is the mean number of leaves
# constant-number-of-leaves forces leaves to be equal
# indel-frequency is the number of sequences with indels (0.02 or 0.03, see:
https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1007977)
# n-indels-per-indeld-seq is the number of indels the sequences have (1:2)
# mean-indel-length is the length of the indel (1)

# simulate and rearrange from scratch:
bin/partis simulate --n-leaves integer --n-sim-events integer --outfname name.yaml --rearrange-from-scratch --mutate-from-scratch

##### Step 2: Partition Sequences into Clonal Families #####

# partition the simulated sequences into families
bin/partis partition --infname name.yaml --outfname name2.yaml

# view families
bin/partis view-output --outfname name2.yaml

